# Руководство по использованию Object Spawner

## Обзор

`Object Spawner` - это система для размещения 3D-моделей в AR-сцене. Модели добавляются в список префабов и спавнятся при взаимодействии с AR-плоскостями.

## Как добавить свои 3D-модели

### Шаг 1: Подготовка модели

1. Импортируйте вашу 3D-модель (`.fbx`, `.obj` и т.д.) в папку `Assets/models/source/`
2. Unity автоматически создаст префаб из модели

### Шаг 2: Создание префаба для спавна

**Важно:** Для корректной работы в AR ваша модель должна быть префабом с необходимыми компонентами:

1. Откройте ваш префаб модели (например, `episode_71.prefab`)
2. Убедитесь, что на корневом объекте есть:
   - **XR Grab Interactable** - для взаимодействия с объектом
   - **Rigidbody** - для физики
   - **Collider** (Mesh Collider или Box Collider) - для определения границ объекта

3. Настройте масштаб модели в Transform компоненте, если нужно

### Шаг 3: Добавление модели в Object Spawner

1. В сцене найдите GameObject с компонентом **Object Spawner**
2. В Inspector найдите секцию **Object Prefabs**
3. Нажмите кнопку **"+"** чтобы добавить новый элемент в список
4. Перетащите ваш префаб из Project window в поле нового элемента
5. Повторите для всех моделей, которые хотите спавнить

### Шаг 4: Настройка спавна

В компоненте **Object Spawner** вы можете настроить:

- **Spawn Option Index**: Индекс модели для спавна (0 = первая модель, -1 = случайная)
- **Only Spawn In View**: Спавнить только если точка в поле зрения камеры
- **Apply Random Angle At Spawn**: Применять случайный поворот при спавне
- **Spawn Angle Range**: Диапазон случайного поворота (в градусах)
- **Spawn As Children**: Спавнить объекты как дочерние элементы

## Масштабирование объектов

### Использование ObjectSpawnerWithScale

Для управления масштабированием объектов при спавне:

1. Добавьте компонент **Object Spawner With Scale** на тот же GameObject, где находится **Object Spawner**
2. Настройте параметры:

   - **Use Scale**: Включить/выключить масштабирование
   - **Base Scale**: Базовый масштаб для всех объектов (например, 1, 1, 1)
   - **Use Random Scale**: Использовать случайный масштаб
   - **Min Scale**: Минимальный масштаб (если используется случайный)
   - **Max Scale**: Максимальный масштаб (если используется случайный)
   - **Uniform Scale**: Сохранять пропорции (использует только X для всех осей)

### Примеры настройки масштаба

**Фиксированный масштаб:**
- Use Scale: ✓
- Use Random Scale: ✗
- Base Scale: (0.5, 0.5, 0.5) - все объекты будут в 2 раза меньше

**Случайный масштаб с пропорциями:**
- Use Scale: ✓
- Use Random Scale: ✓
- Uniform Scale: ✓
- Min Scale: (0.3, 0.3, 0.3)
- Max Scale: (2.0, 2.0, 2.0)
- Объекты будут случайного размера от 0.3x до 2.0x, сохраняя пропорции

**Случайный масштаб без пропорций:**
- Use Scale: ✓
- Use Random Scale: ✓
- Uniform Scale: ✗
- Min Scale: (0.5, 0.3, 0.4)
- Max Scale: (2.0, 1.5, 1.8)
- Каждая ось масштабируется независимо

## Как работает спавн

1. **AR Interactor Spawn Trigger** отслеживает взаимодействие пользователя с AR-плоскостями
2. При нажатии/тапе на плоскость вызывается `TrySpawnObject` из **Object Spawner**
3. **Object Spawner** выбирает префаб из списка (по индексу или случайно)
4. Создается экземпляр префаба в указанной позиции
5. Если добавлен **Object Spawner With Scale**, применяется масштабирование
6. Объект поворачивается лицом к камере (с возможным случайным поворотом)

## Полезные советы

1. **Масштаб модели**: Если модель слишком большая или маленькая, лучше настроить масштаб в самом префабе, а не только через ObjectSpawnerWithScale
2. **Производительность**: Не добавляйте слишком много префабов в список, если не используете случайный выбор
3. **Тестирование**: Используйте **Spawn Option Index** для тестирования конкретной модели (установите индекс вместо -1)
4. **Организация**: Храните все ваши модели в одной папке (`Assets/models/source/`) для удобства

## Решение проблем

**Модель не спавнится:**
- Проверьте, что префаб добавлен в список Object Prefabs
- Убедитесь, что Spawn Option Index правильный (или установлен в -1 для случайного)
- Проверьте, что Only Spawn In View не блокирует спавн

**Модель спавнится неправильного размера:**
- Проверьте настройки масштаба в префабе
- Проверьте настройки ObjectSpawnerWithScale
- Убедитесь, что Use Scale включен

**Модель не взаимодействует:**
- Проверьте наличие компонента XR Grab Interactable на префабе
- Убедитесь, что есть Collider
- Проверьте настройки Interaction Layers

